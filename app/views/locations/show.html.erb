<div class="container-fluid">
  <div class="container">
    <div class="row">
      <div class="col-lg-3 mt-3">
         <h1>My Location</h1><br>
	  </div>
	</div>
	<div class="row">
      <div class="col-lg-9 mb-5">
      	<h3>My saved Address: <%= current_user.person.address%></h3>
      </div>
	</div>
	<div class="row">
      <div class="col-lg-9 mb-5">
		<h3>My last updated location:<br><h3>
		<h4>
		 Latitude: <%= @location.latitude%><br>
		 Longitude: <%= @location.longitude%><br>
		 Estimated address:	<%= @location.address%><br>
		</h4>
      </div>
	</div>
	<div class="row">
      <div class="col-lg-9 mb-5">
		<h3>Nearby users:<br><h3>
		<ul>
			<% User.all.each do |u|%>		
				<% if u.location.latitude != "-1" and u.location.longitude != "-1"%>
					<% distance_miles = Geocoder::Calculations.distance_between(
					[@location.latitude.to_f, @location.longitude	.to_f],
					[u.location.latitude.to_f, u.location.longitude.to_f])%>
					
					<%distance_km = distance_miles * 1.609344 %>
					<li>	
						'<%= u.name %>' is <b><%= distance_km.round(2) %> km</b> away
					</li>
				<% end%>	
			<% end%>		
		<ul>	
      </div>
	</div>
  </div>
</div>